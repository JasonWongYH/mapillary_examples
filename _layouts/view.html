<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="http://mapillary.com/javascripts/mapillary.js" type="text/javascript"></script>

    <meta content="https://d1cuyjsrcm0gby.cloudfront.net/{{ page.image }}/thumb-640.jpg" property="og:image">
    <meta content="{{ page.title }}" property="og:title">
    <meta content="{{ page.smalltitle }}"
          property="og:description">
    <meta content="Mapillary" name="og:site_name">

    <meta content="photo" name="twitter:card">
    <meta content="{{ page.title }}" name="twitter:title">
    <meta content="https://d1cuyjsrcm0gby.cloudfront.net/{{ page.image }}/thumb-640.jpg" name="twitter:image=src">
    <meta content="@mapillary" name="twitter:site">
    <meta content="mapillary.com" name="twitter:domain">

    <script type='text/javascript'>
        var QueryString = function () {
            // This function is anonymous, is executed immediately and
            // the return value is assigned to QueryString!
            var query_string = {};
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                // If first entry with this name
                if (typeof query_string[pair[0]] === "undefined") {
                    query_string[pair[0]] = pair[1];
                    // If second entry with this name
                } else if (typeof query_string[pair[0]] === "string") {
                    var arr = [ query_string[pair[0]], pair[1] ];
                    query_string[pair[0]] = arr;
                    // If third or later entry with this name
                } else {
                    query_string[pair[0]].push(pair[1]);
                }
            }
            return query_string;
        } ();
        window.onload = function (e) {
            console.log("QueryString", QueryString);
            Mapillary.init('mapillary', {image: QueryString.image, legs: QueryString.virtualSeq.replace(/!/g,"|"), width: 500});
        }
    </script>
</head>
<body>
<div id="fb-root"></div>
<script>(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1399999066941114&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script>

<script>
    !function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs");
</script>

<div id="header">
    <nav>
        <li class="fork"><a href="index.html">Back</a></li>
    </nav>
</div>
<!-- end header -->

<div class="wrapper">
    <section>
        <div id="title">
            <h1>{{ page.title }}</h1>
            <hr>
            <h1>{{ page.smalltitle }}</h1>

            <h1>
                <div class="fb-like"
                     data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
            <span style="position: relative; top: 4px;">
              <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en">Tweet</a>
            </span>
            </h1>
            <p>Drag down on the image to move forward or use the 'play' button.</p>
            <p>{{ page.description }}</p>

            The link to this page is in the URL section of the browser.
            <center>
                <div id='mapillary'></div>
            </center>
            <hr>
            <h1>
                <div class="fb-like"
                     data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
            <span style="position: relative; top: 4px;">
              <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en">Tweet</a>
            </span>
            </h1>
            <hr>
            <span class="credits left">Source code for this widget at <a href="https://github.com/mapillary/mapillary_examples">Github</a></span>
            <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a
                    href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>
    </section>

</div>
<!--[if !IE]>
<script>fixScale(document);</script><![endif]-->
</body>
</html>
